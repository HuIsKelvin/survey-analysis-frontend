(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e5d80c06"],{"40a5":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{attrs:{id:"change-pwd"}},[t("p",[e._v("修改密码")]),t("el-form",{ref:"changePwdForm",staticClass:"change-pwd-form",attrs:{"status-icon":"",model:e.password,rules:e.rules}},[t("el-form-item",{attrs:{label:"新密码",prop:"newPwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.password.newPwd,callback:function(s){e.$set(e.password,"newPwd",s)},expression:"password.newPwd"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPwd"}},[t("el-input",{attrs:{type:"password"},model:{value:e.password.checkPwd,callback:function(s){e.$set(e.password,"checkPwd",s)},expression:"password.checkPwd"}})],1),t("el-form-item",[t("el-button",{staticClass:"form-operator",attrs:{type:"primary"},on:{click:function(s){return e.submitForm("changePwdForm")}}},[e._v("修改")]),t("router-link",{attrs:{to:{name:"user.info"},tag:"span"}},[t("el-button",{staticClass:"form-operator",attrs:{type:"primary"}},[e._v("取消")])],1)],1)],1)],1)},o=[],a=t("6e87"),n={name:"ChangePwd",data:function(){var e=this,s=function(s,t,r){if(""===t)r(new Error("请输入密码"));else{var o=/^(?![A-Z]+$)(?![a-z]+$)(?!\d+$)(?![\W_]+$)\S{6,32}$/;o.test(t)?""!==e.password.checkPwd&&e.$refs.changePwdForm.validateField("checkPwd"):r(new Error("密码不能为纯数学或纯字母")),r()}},t=function(s,t,r){""===t?r(new Error("请再输入密码")):t!==e.password.newPwd?r(new Error("两次输入密码不一致")):r()};return{newPwd:"",password:{newPwd:"",checkPwd:""},rules:{newPwd:[{min:6,max:32,message:"密码长度需为6-32个字符",trigger:"blur"},{required:!0,validator:s,trigger:"blur"}],checkPwd:[{required:!0,validator:t,trigger:"blur"}]}}},methods:{onSubmit:function(){console.log("new pwd: "+this.newPwd),axios.post("/auth/update/password?uid="+this.$store.state.user.userId,{password:this.newPwd}).then(function(e){console.log("change success!")}).catch(function(e){console.log(e)})},submitForm:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!"),!1;axios.post("/auth/update/password?uid="+s.$store.state.user.userId,{password:s.password.newPwd}).then(function(e){console.log("change success!"),s.$store.commit(a["z"]),s.$message({showClose:!0,message:"密码修改成功！请重新登录！",type:"success"})}).catch(function(e){console.log(e)})})}}},c=n,d=(t("ef0b"),t("17cc")),i=Object(d["a"])(c,r,o,!1,null,"12cf258c",null);s["default"]=i.exports},c354:function(e,s,t){},ef0b:function(e,s,t){"use strict";var r=t("c354"),o=t.n(r);o.a}}]);
//# sourceMappingURL=chunk-e5d80c06.d2189e7a.js.map