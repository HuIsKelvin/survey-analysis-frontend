(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b9cc3e2"],{"252c":function(e,t,i){},8810:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"bread-header"},[i("el-col",{attrs:{span:2}},[i("div",[i("el-button",{staticStyle:{},attrs:{type:"text"},on:{click:e.backToManage}},[i("i",{staticClass:"el-icon-back"}),i("span",[e._v("返回个人问卷中心")])])],1)]),i("el-col",{attrs:{span:16}},[i("div",{attrs:{id:"prograss-bar"}},[i("el-button",{staticClass:"high-light-button",attrs:{type:"text",disabled:"question-edit"!==e.view.viewType}},[e._v("问卷编辑")]),i("i",{staticClass:"el-icon-arrow-right"}),i("el-button",{attrs:{type:"text",disabled:"release"!==e.view.viewType}},[e._v("发布问卷")]),i("i",{staticClass:"el-icon-arrow-right"}),i("el-button",{attrs:{type:"text",disabled:"report"!==e.view.viewType}},[e._v("统计报表")])],1)]),i("el-col",{attrs:{span:4}},["question-edit"===e.view.viewType?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveQuestionnaire}},[e._v("保存问卷")]):e._e(),"question-edit"===e.view.viewType?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.previewQuestionnaire}},[e._v("预览问卷")]):e._e(),"question-edit"===e.view.viewType?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.releaseAndShare}},[e._v("发布并分享")]):e._e()],1),i("el-col",{attrs:{span:2}},[i("el-dropdown",[i("el-button",{attrs:{type:"text"}},[i("img",{staticClass:"user-logo",attrs:{src:e.userLogo}})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("router-link",{attrs:{to:{name:"user.info"},tag:"span"}},[e._v("我的个人信息")])],1),i("el-dropdown-item",{attrs:{divided:""}},[i("span",{on:{click:e.signout}},[i("i",{staticClass:"el-icon-circle-close-outline"}),e._v("退出登录")])])],1)],1)],1),i("el-dialog",{attrs:{title:"确认信息",visible:e.dialogVisible,"modal-append-to-body":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v("检测到未保存的内容，是否在离开页面前保存修改？")]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveAndJumpToManage}},[e._v("保存")]),i("el-button",{on:{click:e.jumpToManage}},[e._v("放弃修改")]),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)])],1)},n=[],a=i("cebc"),o=i("2f62"),r=i("6e87"),u={name:"bread-header",props:{view:{type:Object}},data:function(){return{userLogo:i("d64e"),dialogVisible:!1}},computed:Object(a["a"])({},Object(o["c"])("questionnaire",{userQuestionList:"userQuestionList",questionnaireId:"questionnaireId",isPagination:"isPagination"})),methods:Object(a["a"])({},Object(o["d"])("questionnaire",{set_state:"set_state",set_qList:"set_questionList"}),Object(o["b"])("survey",{setQuestionnairePreview:"setQuestionnaire"}),{saveAndJumpToManage:function(){this.saveQuestionnaire(),this.jumpToManage()},backToManage:function(){"question-edit"==this.view.viewType?this.dialogVisible=!0:"release"===this.view.viewType&&this.jumpToManage()},jumpToManage:function(){this.$router.push({path:"/user/manage"}),this.dialogVisible=!1},saveQuestionnaire:function(){var e=this;this.set_update_currentPage(),console.log(this.questionnaireId),console.log(this.userQuestionList),axios.put("/questionnaires/"+this.questionnaireId,this.userQuestionList).then(function(t){e.$message({message:"问卷已保存",type:"success"})}).catch(function(t){e.$message.error("保存问卷失败，请重试")})},releaseAndShare:function(){var e=this;this.set_state(!0),this.set_update_currentPage(),console.log(this.userQuestionList),axios.put("/questionnaires/"+this.questionnaireId,this.userQuestionList).then(function(t){var i=t.data.id;e.$message({message:"成功保存并发布问卷",type:"success"}),e.$router.push({name:"releaseQuestionnaire",params:{qid:i}})}).catch(function(t){console.log(t),e.$message({message:"发布问卷失败，请重试",type:"error"})})},previewQuestionnaire:function(){this.set_update_currentPage(),this.setQuestionnairePreview({questionnaire:this.userQuestionList}),this.$router.push({name:"preview"})},signout:function(){this.$store.commit(r["z"]),this.$router.push({name:"sign"})},set_update_currentPage:function(){var e=this.userQuestionList.questionList;e=this.update_currentPage(e),this.set_qList(e)},update_currentPage:function(e){if(this.isPagination){var t=1;for(var i in e)"pagination"==e[i].type?t++:e[i].currentPage=t}return e}})},c=u,l=(i("c4ec"),i("2877")),p=Object(l["a"])(c,s,n,!1,null,"f42832d8",null);t["default"]=p.exports},c4ec:function(e,t,i){"use strict";var s=i("252c"),n=i.n(s);n.a}}]);
//# sourceMappingURL=chunk-1b9cc3e2.ff0fb1c4.js.map